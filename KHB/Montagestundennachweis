{
  "general": {
    "name": {
      "en": "Assembly Time Sheet",
      "de": "Montagestundennachweis"
    }
  },
  "formStructure": {
    "01_generalInformation": {
      "isForm": true,
      "ui": "CARD",
      "initialExpand": true,
      "cardHeadline": {
        "en": "General Information",
        "de": "Allgemeine Informationen"
      },
      "stateIndicator": true,
      "hasNextStep": true,
      "children":{
        "customer": {
          "fieldType": "REMBERG_CUSTOMER_SELECT",
          "required": true,
          "width": 0.5,
          "label": {
            "de": "Kunde",
            "en": "Customer"
          },
          "messages": {
            "onChange": [
              {
                "to": "01_generalInformation",
                "actions": [
                  {
                    "name": "PATCH_DATA",
                    "_dynamicData": {
                      "input": {
                        "_field": "customer",
                        "_propertyName": "customer"
                      },
                      "output": {
                        "_field": "asset",
                        "_propertyName": "customerFilter"
                      }
                    }
                  }
                ]
              },
              {
                "to": "06-signatureTechnician",
                "actions": [
                  {
                    "name": "PATCH_DATA",
                    "_dynamicData": {
                      "input": {
                        "_field": {
                          "_field": {
                            "_field": {
                              "_field": {
                                "_field": "customer",
                                "_propertyName": "customer"
                              },
                              "_functionName": "GET_ACCOUNT"
                            },
                            "_propertyName": "company"
                          },
                          "_propertyName": "billingAddress"
                        },
                        "_propertyName": "city"
                      },
                      "output": {
                        "_formArray": "signature_technician",
                        "_formArrayIndex": 0,
                        "_propertyName": "location"
                      }
                    }
                  }
                ]
              },
              {
                "to": "07-signatureCustomer",
                "actions": [
                  {
                    "name": "PATCH_DATA",
                    "_dynamicData": {
                      "input": {
                        "_field": {
                          "_field": {
                            "_field": {
                              "_field": {
                                "_field": "customer",
                                "_propertyName": "customer"
                              },
                              "_functionName": "GET_ACCOUNT"
                            },
                            "_propertyName": "company"
                          },
                          "_propertyName": "billingAddress"
                        },
                        "_propertyName": "city"
                      },
                      "output": {
                        "_formArray": "signature_customer",
                        "_formArrayIndex": 0,
                        "_propertyName": "location"
                      }
                    }
                  }
                ]
              }
            ]
          }
        },
        "order_number": {
          "fieldType": "INPUT_TEXT",
          "label": {
            "de": "Bestellnummer",
            "en": "Order Number"
          },
          "required": false,
          "hideInPdfIfEmpty": true,
          "width": 0.5
        },
        "kommission": {
          "fieldType": "INPUT_TEXT",
          "label": {
            "de": "Kommission",
            "en": "Commission"
          },
          "required": false,
          "hideInPdfIfEmpty": true,
          "width": 0.5
        },
        "leistungszeitraum": {
          "fieldType": "INPUT_TEXT",
          "label": {
            "de": "Leistungszeitraum",
            "en": "Order Number"
          },
          "required": false,
          "hideInPdfIfEmpty": true,
          "width": 0.5
        },
        "khb_order_number": {
          "fieldType": "INPUT_TEXT",
          "label": {
            "de": "khb-Auftragsnummer",
            "en": "khb Work Order Number"
          },
          "required": false,
          "hideInPdfIfEmpty": true,
          "width": 0.5
        },
        "kurzbericht": {
          "fieldType": "TEXTAREA",
          "label": {
            "de": "Kurzbericht über Montageverlauf",
            "en": "Short report about assembly process"
          },
          "hiddenInPdf": false,
          "hideInPdfIfEmpty": true,
          "required": false,
          "width": 1
        },
        "notes": {
          "fieldType": "TEXTAREA",
          "label": {
            "de": "Material / sonstige Kosten / besondere Vereinbarungen",
            "en": "Material / other costs / special agreements"
          },
          "hiddenInPdf": false,
          "hideInPdfIfEmpty": true,
          "required": false,
          "width": 1
        }
      },
      "messages": {
        "onLoaded": [
          {
            "to": "ROOT",
            "actions": [
              {
                "name": "PATCH_DATA",
                "_dynamicData": {
                  "input": {
                    "_field": {
                      "_field": "ARGS",
                      "_propertyName": "asset",
                      "_functionName": "GET_PRODUCT"
                    },
                    "_propertyName": "customer"
                  },
                  "output": {
                    "_field": "customer",
                    "_propertyName": "customer"
                  }
                }
              }
            ]
          },
          {
            "to": "ROOT",
            "actions": [
              {
                "name": "PATCH_DATA",
                "_dynamicData": {
                  "input": {
                    "_field": "ARGS",
                    "_propertyName": "asset",
                    "_functionName": "GET_PRODUCT"
                  },
                  "output": {
                    "_field": "asset",
                    "_propertyName": "product"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    "04_tasks": {
      "isForm": true,
      "ui": "CARD",
      "initialExpand": true,
      "cardHeadline": {
        "en": "Working and Travel Times",
        "de": "Arbeits- und Reisezeiten"
      },
      "stateIndicator": true,
      "hasNextStep": true,
      "children": {
        "times":{
          "fieldType": "REMBERG_WORK_TIMES",
          "label": {
            "de": "Zeiten",
            "en": "Times"
          },
          "hiddenInPdf": false,
          "width": 1,
          "required": false
        }
      }
    },
    "06-signatureTechnician": {
      "isForm": true,
      "ui": "CARD",
      "initialExpand": false,
      "cardHeadline": {
        "en": "Signature Staff Member",
        "de": "Unterschrift Mitarbeiter"
      },
      "stateIndicator": true,
      "width": 0.5,
      "unbreakable": true,
      "hasNextStep": true,
      "children": {
        "signature_technician": {
          "fieldType": "REMBERG_SIGNATURE",
          "label": {
            "de": "Mitarbeiter",
            "en": "Staff Member"
          },
          "hiddenInPdf": false,
          "showTime": false,
          "autofillCurrentUser": true,
          "required": true
        }
      }
    },
    "07-signatureCustomer": {
      "isForm": true,
      "ui": "CARD",
      "initialExpand": false,
      "cardHeadline": {
        "en": "Signature Customer",
        "de": "Unterschrift Auftraggeber"
      },
      "stateIndicator": true,
      "width": 0.5,
      "unbreakable": true,
      "hasNextStep": true,
      "children": {
        "signature_customer": {
          "hiddenInPdf": false,
          "showTime": false,
          "fieldType": "REMBERG_SIGNATURE",
          "label": {
            "de": "Auftraggeber",
            "en": "Customer"
          },
          "required": true
        }
      }
    },
    "12-send": {
      "isForm": true,
      "ui": "CARD",
      "initialExpand": false,
      "cardHeadline": {
        "en": "Send/sent form as E-Mail",
        "de": "Bericht als E-Mail senden/gesendet"
      },
      "stateIndicator": true,
      "hiddenInPdf": true,
      "hasNextStep": true,
      "children": {
        "send3": {
          "fieldType": "REMBERG_SEND",
          "label": {
            "de": "Gesendet an",
            "en": "Sent to"
          },
          "prefillConfig": {
            "subject": "Montagestundennachweis - khb Maschinen- und Anlagenbau GmbH",
            "content": "Sehr geehrte Damen und Herren,\n\nanbei erhalten sie den Montagestundennachweis unseres Technikers für den Einsatz in Ihrem Unternehmen.\nWir hoffen, dass Sie mit der ausgeführten Tätigkeit zufrieden sind.\nFür weitere Fragen steht Ihnen unser Team zur Verfügung.\n\nMit freundlichen Grüßen\n\nIhr Team der khb Maschinen- und Anlagenbau GmbH\n\n--\n\nDear Sir and Madam,\n\nEnclosed you will find the service protocol of our technician for the work in your company.\nWe hope you are satisfied with the work.\nIf you have any further questions, please do not hesitate to contact our team.\n\nBest regards\n\nYour team from khb Maschinen- und Anlagenbau GmbH",
            "to": {
              "currentUser": false
            },
            "cc": {
              "currentUser": false
            },
            "bcc": {
              "currentUser": true
            }
          },
          "required": false
        }
      },
      "messages": {
        "onFinish": [
          {
            "to": "ROOT",
            "actions": [
              {
                "name": "SAVE_TO_BACKEND"
              }
            ]
          }
        ]
      }
    }
  }
}